<mxfile host="app.diagrams.net" modified="2025-01-01T12:00:00.000Z" agent="FlexPay" version="24.7.17" etag="flow" type="device">
  <diagram name="Transaction-Flow" id="transaction_flow">
    <mxGraphModel dx="1600" dy="900" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" background="light-dark(#222326, #121212)" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="FlexPay - Transaction Flow (End-to-End)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="600" height="40" as="geometry" />
        </mxCell>

        <!-- Swimlanes -->
        <mxCell id="customer_lane" value="Customer" style="swimlane;fillColor=#e3f2fd;strokeColor=#2196f3;" vertex="1" parent="1">
          <mxGeometry x="100" y="80" width="1400" height="150" as="geometry" />
        </mxCell>

        <mxCell id="frontend_lane" value="Frontend (Widget)" style="swimlane;fillColor=#fff3e0;strokeColor=#ff9800;" vertex="1" parent="1">
          <mxGeometry x="100" y="230" width="1400" height="150" as="geometry" />
        </mxCell>

        <mxCell id="gateway_lane" value="API Gateway" style="swimlane;fillColor=#e8f5e9;strokeColor=#4caf50;" vertex="1" parent="1">
          <mxGeometry x="100" y="380" width="1400" height="150" as="geometry" />
        </mxCell>

        <mxCell id="services_lane" value="Microservices" style="swimlane;fillColor=#f3e5f5;strokeColor=#7b1fa2;" vertex="1" parent="1">
          <mxGeometry x="100" y="530" width="1400" height="200" as="geometry" />
        </mxCell>

        <mxCell id="external_lane" value="External Systems" style="swimlane;fillColor=#fce4ec;strokeColor=#c2185b;" vertex="1" parent="1">
          <mxGeometry x="100" y="730" width="1400" height="150" as="geometry" />
        </mxCell>

        <!-- Customer Actions -->
        <mxCell id="start" value="Start" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4caf50;fontColor=#ffffff;" vertex="1" parent="customer_lane">
          <mxGeometry x="20" y="50" width="60" height="60" as="geometry" />
        </mxCell>

        <mxCell id="select_product" value="Select Product" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196f3;fontColor=#ffffff;" vertex="1" parent="customer_lane">
          <mxGeometry x="120" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="checkout" value="Go to Checkout" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196f3;fontColor=#ffffff;" vertex="1" parent="customer_lane">
          <mxGeometry x="250" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="enter_payment" value="Enter Payment Info" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196f3;fontColor=#ffffff;" vertex="1" parent="customer_lane">
          <mxGeometry x="380" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="confirm_order" value="Confirm Order" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2196f3;fontColor=#ffffff;" vertex="1" parent="customer_lane">
          <mxGeometry x="510" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Frontend Actions -->
        <mxCell id="load_widget" value="Load Widget" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;fontColor=#ffffff;" vertex="1" parent="frontend_lane">
          <mxGeometry x="250" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="validate_form" value="Validate Form" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;fontColor=#ffffff;" vertex="1" parent="frontend_lane">
          <mxGeometry x="380" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="encrypt_data" value="Encrypt PCI Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;fontColor=#ffffff;" vertex="1" parent="frontend_lane">
          <mxGeometry x="510" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="send_request" value="Send Request" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ff9800;fontColor=#ffffff;" vertex="1" parent="frontend_lane">
          <mxGeometry x="640" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Gateway Actions -->
        <mxCell id="auth_check" value="JWT Auth" style="rhombus;whiteSpace=wrap;html=1;fillColor=#4caf50;fontColor=#ffffff;" vertex="1" parent="gateway_lane">
          <mxGeometry x="640" y="45" width="100" height="70" as="geometry" />
        </mxCell>

        <mxCell id="rate_limit" value="Rate Limiting" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;fontColor=#ffffff;" vertex="1" parent="gateway_lane">
          <mxGeometry x="770" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <mxCell id="route_request" value="Route Request" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#4caf50;fontColor=#ffffff;" vertex="1" parent="gateway_lane">
          <mxGeometry x="900" y="55" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Microservices Actions -->
        <mxCell id="checkout_service" value="Checkout Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;fontColor=#ffffff;" vertex="1" parent="services_lane">
          <mxGeometry x="900" y="30" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="risk_service" value="Risk Analysis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;fontColor=#ffffff;" vertex="1" parent="services_lane">
          <mxGeometry x="770" y="120" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="payment_service" value="Payment Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;fontColor=#ffffff;" vertex="1" parent="services_lane">
          <mxGeometry x="1050" y="30" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="notification_service" value="Notification Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9c27b0;fontColor=#ffffff;" vertex="1" parent="services_lane">
          <mxGeometry x="1200" y="120" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="event_publish" value="Publish Events" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#7b1fa2;fontColor=#ffffff;" vertex="1" parent="services_lane">
          <mxGeometry x="1050" y="120" width="120" height="50" as="geometry" />
        </mxCell>

        <!-- External Systems -->
        <mxCell id="akua_api" value="Akua.la API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e91e63;fontColor=#ffffff;" vertex="1" parent="external_lane">
          <mxGeometry x="1050" y="55" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="fraud_bureau" value="Fraud Bureau" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e91e63;fontColor=#ffffff;" vertex="1" parent="external_lane">
          <mxGeometry x="770" y="55" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="email_provider" value="SendGrid" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e91e63;fontColor=#ffffff;" vertex="1" parent="external_lane">
          <mxGeometry x="1200" y="55" width="120" height="50" as="geometry" />
        </mxCell>

        <mxCell id="end" value="End" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f44336;fontColor=#ffffff;" vertex="1" parent="external_lane">
          <mxGeometry x="1350" y="50" width="60" height="60" as="geometry" />
        </mxCell>

        <!-- Flow Arrows -->
        <mxCell id="flow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="start" target="select_product">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="select_product" target="checkout">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="checkout" target="load_widget">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="enter_payment" target="validate_form">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="validate_form" target="encrypt_data">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="confirm_order" target="send_request">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="send_request" target="auth_check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="auth_check" target="rate_limit">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="rate_limit" target="route_request">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="route_request" target="checkout_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="checkout_service" target="payment_service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="payment_service" target="akua_api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="flow13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666;strokeWidth=2;endArrow=block;endFill=1;" edge="1" parent="1" source="akua_api" target="end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>